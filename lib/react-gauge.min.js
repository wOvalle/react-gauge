var React=require("react"),PropTypes=require("prop-types"),createReactClass=require("create-react-class"),ReactGauge=createReactClass({displayName:"ReactGauge",getInitialState:function(){return{radius:this.props.radius,arcStrokeWidth:this.props.arcStrokeWidth,tickOffset:this.props.tickOffset,tickStrokeWidth:this.props.tickStrokeWidth,tickLength:this.props.tickLength,miniTickLength:this.props.miniTickLength,miniTickStrokeWidth:this.props.miniTickStrokeWidth,scaleDivisionNumber:this.props.scaleDivisionNumber,tickLabelOffset:this.props.tickLabelOffset,centralCircleRadius:this.props.centralCircleRadius,isInnerNumbers:this.props.isInnerNumbers,arrowValue:this.props.arrowValue,marks:this.props.marks,ranges:this.props.ranges,aperture:this.props.aperture,contentWidth:this.props.contentWidth,svgContainerWidth:this.props.contentWidth,svgContainerHeight:this.props.svgContainerHeight}},getDefaultProps:function(){return{radius:175,arcStrokeWidth:3,tickOffset:7,tickStrokeWidth:2,tickLength:5,miniTickLength:1,miniTickStrokeWidth:1,scaleDivisionNumber:10,tickLabelOffset:10,centralCircleRadius:10,isInnerNumbers:!1,arrowValue:0,marks:[0,1,2,3,4,5,6],ranges:[{start:0,end:.75,color:"#666"},{start:.75,end:5.5/6,color:"#ffa500"},{start:5.5/6,end:1,color:"#ff0000"}],aperture:80,contentWidth:450,svgContainerWidth:450,svgContainerHeight:450}},handleChange:function(e){this.setState({radius:e.target.radius,arcStrokeWidth:e.target.arcStrokeWidth,tickOffset:e.target.tickOffset,tickStrokeWidth:e.target.tickStrokeWidth,tickLength:e.target.tickLength,miniTickLength:e.target.miniTickLength,miniTickStrokeWidth:e.target.miniTickStrokeWidth,scaleDivisionNumber:e.target.scaleDivisionNumber,tickLabelOffset:e.target.tickLabelOffset,centralCircleRadius:e.target.centralCircleRadius,isInnerNumbers:e.target.isInnerNumbers,arrowValue:e.target.arrowValue,marks:e.target.marks,ranges:e.target.ranges,aperture:e.target.aperture,contentWidth:e.target.contentWidth,svgContainerWidth:e.target.svgContainerWidth,svgContainerHeight:e.target.svgContainerHeight})},propTypes:{radius:PropTypes.number,arcStrokeWidth:PropTypes.number,tickOffset:PropTypes.number,tickStrokeWidth:PropTypes.number,tickLength:PropTypes.number,miniTickLength:PropTypes.number,miniTickStrokeWidth:PropTypes.number,scaleDivisionNumber:PropTypes.number,tickLabelOffset:PropTypes.number,centralCircleRadius:PropTypes.number,isInnerNumbers:PropTypes.bool,arrowValue:PropTypes.number,marks:PropTypes.array,ranges:PropTypes.arrayOf(PropTypes.shape({start:PropTypes.number.isRequired,end:PropTypes.number.isRequired,color:PropTypes.string.isRequired})).isRequired,aperture:PropTypes.number,contentWidth:PropTypes.number,svgContainerWidth:PropTypes.number,svgContainerHeight:PropTypes.number},render:function(){var e=this.state.radius,t=this.state.arcStrokeWidth,r=this.state.tickOffset,i=this.state.tickStrokeWidth,s=this.state.tickLength,a=this.state.miniTickLength,n=this.state.miniTickStrokeWidth,o=this.state.scaleDivisionNumber,c=this.state.tickLabelOffset,h=this.state.centralCircleRadius,u=this.state.isInnerNumbers,p=this.state.arrowValue,g=this.state.marks,l=this.state.ranges,k=this.state.aperture,d=this.state.contentWidth,m=d,y=d,f={x:m/2,y:y/2},b=k/2-180,W=180-k/2,T=W-b,v=function(e,t,r,i){var s=(i-90)*Math.PI/180;return{x:e+r*Math.cos(s),y:t+r*Math.sin(s)}};return React.createElement("svg",{className:"gauge",width:this.state.svgContainerWidth,height:this.state.svgContainerHeight,shapeRendering:"geometricPrecision"},function(){var r=function(r,i,s,a){return React.createElement("path",{className:"gauge-arc-"+a,key:a,fill:"none",stroke:s,strokeWidth:t,d:function(e,t,r,i,s){var a=v(e,t,r,s),n=v(e,t,r,i),o=s-i<=180?"0":"1";return["M",a.x,a.y,"A",r,r,0,o,0,n.x,n.y].join(" ")}(f.x,f.y,e,r,i)})},i=[];return l.forEach(function(e,t){i.push(r(b+e.start*T,b+e.end*T,e.color,t))}),i}(),function(){var t=[],c=0;return g.forEach(function(i,s,h){if(0!==s)for(var p=T/(h.length-1)/o,g=1;g<o;g++){var l=v(f.x,f.y,e+(u?-1:1)*r,b+s*T/(h.length-1)-p*g),k=v(f.x,f.y,e+(u?-1:1)*(r+a),b+s*T/(h.length-1)-p*g);t.push(React.createElement("line",{className:"gauge-mini-tick",key:c++,stroke:"#b5b5b5",x1:l.x,y1:l.y,x2:k.x,y2:k.y,strokeWidth:n}))}}),g.forEach(function(a,n,o){var h=v(f.x,f.y,e+(u?-1:1)*r,b+n*T/(o.length-1)),p=v(f.x,f.y,e+(u?-1:1)*(r+s),b+n*T/(o.length-1));t.push(React.createElement("line",{className:"gauge-tick",key:c++,stroke:"#b5b5b5",x1:h.x,y1:h.y,x2:p.x,y2:p.y,strokeWidth:i}))}),t}(),function(){var t=[],a=0;return g.forEach(function(n,o,h){var p=v(f.x,f.y,e+(u?-1:1)*(r+s+c),b+o*T/(h.length-1));t.push(React.createElement("text",{className:"gauge-label",key:a++,fill:"#666666",x:p.x,y:p.y,alignmentBaseline:"middle",textAnchor:"middle",strokeWidth:i},n))}),t}(),function(){var t=[],i=0,a=v(f.x,f.y,h/2,b+T*p-90),n=v(f.x,f.y,e+(u?-1:1)*(r+s/2),b+T*p),o=v(f.x,f.y,h/2,b+T*p+90),c=["M",a.x,a.y,"L",n.x,n.y,"L",o.x,o.y,"Z"].join(" ");return t.push(React.createElement("path",{className:"gauge-arrow",key:i++,fill:"#1e98e4",d:c})),t.push(React.createElement("circle",{className:"gauge-arrow",key:i++,fill:"#1e98e4",cx:f.x,cy:f.y,r:h})),t}())}});module.exports=ReactGauge;